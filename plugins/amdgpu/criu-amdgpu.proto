syntax = "proto2";

message process_entry {
	required bytes private_data = 1;
}

message device_entry {
	required uint32 gpu_id = 1;
	required bytes private_data = 2;
}

message bo_entry {
	required uint64	addr = 1;
	required uint64	size = 2;
	required uint64	offset = 3;
	required uint32 alloc_flags = 4;
	required uint32 gpu_id = 5;
	required bytes rawdata = 6;
	required bytes private_data = 7;
}

message q_entry {
	required uint32 gpu_id = 1;
	required bytes private_data = 2;
}

message ev_entry {
	required uint32 gpu_id = 1;
	required bytes private_data = 2;
}

message criu_kfd {
	required uint32 pid = 1;
	required process_entry process_entry = 2;
	required uint32 num_of_gpus = 3;
	repeated device_entry device_entries = 4;
	required uint64	num_of_bos = 5;
	repeated bo_entry bo_entries = 6;
	required uint32	num_of_queues = 7;
	repeated q_entry q_entries = 8;
	required uint64 event_page_offset = 9;
	required uint32 num_of_events = 10;
	repeated ev_entry ev_entries = 11;
}

message criu_render_node {
	required uint32 minor_number = 1;
}
